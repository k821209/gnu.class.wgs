<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹¤ìŠµ í™˜ê²½ ì†Œê°œ - JupyterLab ê¸°ë°˜ WGS ë¶„ì„</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body { font-family: 'Malgun Gothic', Arial, sans-serif; margin: 0; padding: 0; background: #f5f5f5; }
        .slide { width: 100%; height: 100vh; display: block; padding: 40px; box-sizing: border-box; background: white; }
        .slide-title { font-size: 36px; font-weight: bold; color: #2c3e50; margin-bottom: 30px; border-bottom: 3px solid #27ae60; padding-bottom: 10px; }
        .slide-content { font-size: 18px; line-height: 1.6; color: #34495e; }
        .slide-content h2 { color: #27ae60; font-size: 24px; margin-top: 30px; }
        .slide-content h3 { color: #e74c3c; font-size: 20px; margin-top: 20px; }
        .slide-content ul { margin: 15px 0; padding-left: 30px; }
        .slide-content li { margin: 8px 0; }
        .highlight { background: #fff3cd; padding: 3px 8px; border-radius: 3px; }
        .code-block { background: #1e1e1e; color: #f8f8f2; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; margin: 15px 0; font-size: 14px; white-space: pre-wrap; border: 1px solid #444; position: relative; }
        .code-block-container { position: relative; }
        .copy-button { position: absolute; top: 10px; right: 10px; background: #444; color: #f8f8f2; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px; opacity: 0.7; transition: opacity 0.2s; }
        .copy-button:hover { opacity: 1; background: #555; }
        .copy-button.copied { background: #27ae60; color: white; }
        .copy-button.copied:after { content: " âœ“"; }
        .code-block.python { /* Python code blocks */ }
        .code-block.bash { /* Bash code blocks */ }
        
        /* Syntax highlighting color classes */
        .comment { color: #75715e; } /* Comments */
        .keyword { color: #f92672; } /* Keywords */
        .function { color: #a6e22e; } /* Function names */
        .string { color: #e6db74; } /* Strings */
        .number { color: #ae81ff; } /* Numbers */
        .param { color: #fd971f; } /* Parameters */
        .variable { color: #f8f8f2; } /* Variables */
        .builtin { color: #a6e22e; } /* Built-in functions */
        .operator { color: #f92672; } /* Operators */
        .shebang { color: #75715e; } /* Shebang */
        .navigation { position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
        .nav-btn { background: #27ae60; color: white; border: none; padding: 10px 20px; margin: 0 5px; border-radius: 5px; cursor: pointer; }
        .nav-btn:hover { background: #229954; }
        .fullscreen-btn { background: #e74c3c; color: white; border: none; padding: 10px 15px; margin: 0 5px; border-radius: 5px; cursor: pointer; }
        .fullscreen-btn:hover { background: #c0392b; }
        .jump-btn { background: #3498db; color: white; border: none; padding: 10px 15px; margin: 0 5px; border-radius: 5px; cursor: pointer; }
        .jump-btn:hover { background: #2980b9; }
        .slide-number { position: fixed; bottom: 20px; left: 20px; color: #7f8c8d; font-size: 14px; }
        .comparison-table { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .comparison-item { background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #27ae60; }
        .comparison-item h4 { margin: 0 0 10px 0; color: #2c3e50; }
        .setup-steps { background: #e8f4fd; border-left: 4px solid #3498db; padding: 20px; margin: 20px 0; border-radius: 8px; }
    </style>
</head>
<body>

<div class="slide">
    <div class="slide-title">ğŸ–¥ï¸ ì‹¤ìŠµ í™˜ê²½ ì†Œê°œ</div>
    <div class="slide-content">
        <h2>ğŸ¯ ì‹¤ìŠµ ëª©í‘œ</h2>
        <p>ì‹¤ì œ ì‹ë¬¼ ê²Œë†ˆ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì²´ WGS ë¶„ì„ íŒŒì´í”„ë¼ì¸ì„ ìˆ˜í–‰í•˜ê³ , JupyterLab í™˜ê²½ì—ì„œ Pythonì„ í™œìš©í•œ ìƒë¬¼ì •ë³´í•™ ë¶„ì„ ê¸°ë²•ì„ ìµí™ë‹ˆë‹¤.</p>

        <div class="comparison-table">
            <div class="comparison-item">
                <h4><i class="fas fa-bullseye"></i> í•™ìŠµ ëª©í‘œ</h4>
                <ul>
                    <li>FASTQ íŒŒì¼ êµ¬ì¡° ì´í•´ ë° í’ˆì§ˆ í‰ê°€</li>
                    <li>í’ˆì§ˆ ê´€ë¦¬ ë° ì „ì²˜ë¦¬ ê¸°ë²•</li>
                    <li>ì°¸ì¡° ê²Œë†ˆ ì •ë ¬ ê³¼ì •</li>
                    <li>ë³€ì´ í˜¸ì¶œ ë° ê²°ê³¼ í•´ì„</li>
                    <li>Python ìƒë¬¼ì •ë³´í•™ ë¼ì´ë¸ŒëŸ¬ë¦¬ í™œìš©</li>
                </ul>
            </div>
            
            <div class="comparison-item" style="border-left-color: #f39c12;">
                <h4><i class="fas fa-tools"></i> ì‚¬ìš© ë„êµ¬</h4>
                <ul>
                    <li><strong>JupyterLab:</strong> ì¸í„°ë™í‹°ë¸Œ ë¶„ì„ í™˜ê²½</li>
                    <li><strong>Python:</strong> BioPython, pandas, matplotlib</li>
                    <li><strong>FastQC:</strong> í’ˆì§ˆ í‰ê°€</li>
                    <li><strong>Trimmomatic:</strong> ì–´ëŒ‘í„° ì œê±°</li>
                    <li><strong>BWA-MEM:</strong> ê²Œë†ˆ ì •ë ¬</li>
                    <li><strong>GATK:</strong> ë³€ì´ í˜¸ì¶œ</li>
                </ul>
            </div>
        </div>

        <h2>â˜ï¸ Amazon EC2 ì‹¤ìŠµ í™˜ê²½</h2>
        
        <div class="setup-steps">
            <h3><i class="fas fa-cloud"></i> ì‚¬ì „ ë°°í¬ëœ Amazon EC2 ì¸ìŠ¤í„´ìŠ¤</h3>
            
            <div style="background: #f8f9fa; padding: 15px; margin: 15px 0; border-radius: 6px; border-left: 4px solid #6c757d;">
                <h4 style="color: #495057; margin: 0 0 10px 0;"><i class="fas fa-laptop-code"></i> JupyterLab ì‹¤ìŠµ í™˜ê²½ì´ë€?</h4>
                <p style="color: #495057; margin: 0 0 10px 0; font-size: 14px;">
                    <strong>JupyterLab</strong>ì€ ë°ì´í„° ê³¼í•™ê³¼ ìƒë¬¼ì •ë³´í•™ ë¶„ì•¼ì—ì„œ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ì›¹ ê¸°ë°˜ ëŒ€í™”í˜• ê°œë°œ í™˜ê²½ì…ë‹ˆë‹¤.
                </p>
                <div class="comparison-table" style="margin-top: 15px;">
                    <div class="comparison-item" style="border-left-color: #17a2b8; background: #ffffff;">
                        <h4><i class="fas fa-chart-line"></i> ì£¼ìš” ê¸°ëŠ¥</h4>
                        <ul style="font-size: 13px;">
                            <li><strong>ë…¸íŠ¸ë¶:</strong> ì½”ë“œ, í…ìŠ¤íŠ¸, ê·¸ë˜í”„ë¥¼ í•˜ë‚˜ì˜ ë¬¸ì„œì—</li>
                            <li><strong>ì‹¤ì‹œê°„ ì‹¤í–‰:</strong> ì½”ë“œë¥¼ ì…€ ë‹¨ìœ„ë¡œ ì‹¤í–‰ ë° ê²°ê³¼ í™•ì¸</li>
                            <li><strong>ì‹œê°í™”:</strong> ê·¸ë˜í”„ì™€ ì°¨íŠ¸ë¥¼ ë°”ë¡œ í™•ì¸</li>
                            <li><strong>ë¬¸ì„œí™”:</strong> ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë¶„ì„ ê³¼ì • ê¸°ë¡</li>
                        </ul>
                    </div>
                    
                    <div class="comparison-item" style="border-left-color: #28a745; background: #ffffff;">
                        <h4><i class="fas fa-dna"></i> ìƒë¬¼ì •ë³´í•™ì—ì„œì˜ ì¥ì </h4>
                        <ul style="font-size: 13px;">
                            <li><strong>íƒìƒ‰ì  ë¶„ì„:</strong> ë‹¨ê³„ë³„ ë°ì´í„° íƒìƒ‰</li>
                            <li><strong>ê²°ê³¼ ì‹œê°í™”:</strong> ì¦‰ì‹œ ê·¸ë˜í”„ ìƒì„± ë° í™•ì¸</li>
                            <li><strong>ì¬í˜„ê°€ëŠ¥ì„±:</strong> ë¶„ì„ ê³¼ì •ì„ ìˆœì„œëŒ€ë¡œ ê¸°ë¡</li>
                            <li><strong>í˜‘ì—…:</strong> ë…¸íŠ¸ë¶ ê³µìœ ë¡œ ë¶„ì„ ê³¼ì • ì „ë‹¬</li>
                        </ul>
                    </div>
                </div>
                
                <div style="margin-top: 15px; padding: 10px; background: #e3f2fd; border-radius: 4px;">
                    <p style="margin: 0; font-size: 13px; color: #1565c0;">
                        <strong>ğŸ’¡ ì‹¤ìŠµì—ì„œëŠ”</strong> FASTQ íŒŒì¼ ë¶„ì„ë¶€í„° ë³€ì´ í˜¸ì¶œê¹Œì§€ ëª¨ë“  ê³¼ì •ì„ JupyterLabì—ì„œ 
                        ë‹¨ê³„ë³„ë¡œ ì§„í–‰í•˜ë©°, ê° ë‹¨ê³„ì˜ ê²°ê³¼ë¥¼ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                </div>
            </div>
            
            <div class="comparison-table">
                <div class="comparison-item" style="border-left-color: #ff9900;">
                    <h4><i class="fas fa-server"></i> AWS ì‹¤ìŠµ í™˜ê²½ ì‚¬ì–‘</h4>
                    <ul>
                        <li><strong>EC2 ì¸ìŠ¤í„´ìŠ¤:</strong> t3.xlarge (4 vCPU, 16GB RAM)</li>
                        <li><strong>EBS ìŠ¤í† ë¦¬ì§€:</strong> 100GB</li>
                        <li><strong>ìš´ì˜ì²´ì œ:</strong> Ubuntu 22.04 LTS</li>
                        <li><strong>ê¸°ë³¸ ì„¤ì¹˜:</strong> Python 3.10, conda, JupyterLab</li>
                    </ul>
                </div>
                
                <div class="comparison-item" style="border-left-color: #2196f3;">
                    <h4><i class="fas fa-globe"></i> ì ‘ì† ì •ë³´</h4>
                    <ul>
                        <li><strong>IP ì£¼ì†Œ:</strong> predistributed ip address</li>
                        <li><strong>ì ‘ì† ë°©ì‹:</strong> ì›¹ ë¸Œë¼ìš°ì € ì§ì ‘ ì ‘ì†</li>
                        <li><strong>í¬íŠ¸:</strong> 8888 (JupyterLab)</li>
                        <li><strong>ì¸ì¦:</strong> í† í° ì¸ì¦ ì—†ìŒ</li>
                    </ul>
                </div>
            </div>
            
            <h4>1. JupyterLab ì ‘ì†</h4>
            <p>JupyterLabì´ ì´ë¯¸ ì‹¤í–‰ë˜ì–´ ìˆì–´ ë°”ë¡œ ì›¹ ë¸Œë¼ìš°ì €ë¡œ ì ‘ì† ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
            
            <div class="code-block"># JupyterLabì´ ì‚¬ì „ êµ¬ì„±ë˜ì–´ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤
# ë³„ë„ ì„¤ì • ì—†ì´ ë°”ë¡œ ì›¹ ì ‘ì† ê°€ëŠ¥

# í•„ìš”ì‹œ ìƒíƒœ í™•ì¸
ps aux | grep jupyter</div>

            <h4>2. ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ JupyterLab ì ‘ì†</h4>
            <ul>
                <li>ë¸Œë¼ìš°ì €ì—ì„œ <code>http://[predistributed-ip-address]:8888</code> ì§ì ‘ ì ‘ì†</li>
                <li>JupyterLabì´ ë°”ë¡œ ì—´ë¦½ë‹ˆë‹¤ (í† í° ì¸ì¦ ì—†ìŒ)</li>
                <li>ìƒˆë¡œìš´ Python ë…¸íŠ¸ë¶ì„ ìƒì„±í•˜ì—¬ ì‹¤ìŠµ ì§„í–‰</li>
            </ul>
        </div>

        <h2>ğŸ“ ì‹¤ìŠµ ë°ì´í„° ì¤€ë¹„</h2>
        
        <div class="comparison-table">
            <div class="comparison-item" style="border-left-color: #2980b9;">
                <h4><i class="fas fa-database"></i> ì‹¤ìŠµ ë°ì´í„°ì…‹</h4>
                <ul>
                    <li><strong>ì¢…:</strong> ì½© (Glycine max, Soybean)</li>
                    <li><strong>ì‹œí€€ì‹± ë°ì´í„° ID:</strong> ERR3184150 (SRA)</li>
                    <li><strong>FASTQ íŒŒì¼:</strong> ERR3184150_top_1.fastq.gz, ERR3184150_top_2.fastq.gz</li>
                    <li><strong>ë°ì´í„° íƒ€ì…:</strong> Paired-end Illumina ì‹œí€€ì‹±</li>
                    <li><strong>í¬ê¸°:</strong> ìƒìœ„ ë¦¬ë“œë§Œ í¬í•¨ (êµìœ¡ìš©)</li>
                </ul>
            </div>
            
            <div class="comparison-item" style="border-left-color: #8e44ad;">
                <h4><i class="fas fa-folder-open"></i> EC2 ë°ì´í„° êµ¬ì¡°</h4>
                <div class="code-block" style="background: #f8f9fa; color: #2c3e50; font-size: 12px; white-space: pre-line;">/home/ubuntu/edu/
â”œâ”€â”€ raw_data/
â”‚   â”œâ”€â”€ ERR3184150_top_1.fastq.gz
â”‚   â””â”€â”€ ERR3184150_top_2.fastq.gz
â”œâ”€â”€ reference/
â”‚   â”œâ”€â”€ soybean_genome.fa
â”‚   â””â”€â”€ soybean_genome.fa.fai
â”œâ”€â”€ notebooks/
â”‚   â””â”€â”€ (ì‹¤ìŠµ ì¤‘ ìƒì„±í•  ë…¸íŠ¸ë¶ë“¤)
â””â”€â”€ results/
    â””â”€â”€ (ë¶„ì„ ê²°ê³¼ ì €ì¥)</div>
            </div>
        </div>

        <h3>ğŸ“¥ ë°ì´í„° ë‹¤ìš´ë¡œë“œ</h3>
        <p>ì‹¤ìŠµì—ì„œ ì‚¬ìš©í•  FASTQ íŒŒì¼ê³¼ ì°¸ì¡° ê²Œë†ˆì„ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤:</p>
        
        <div class="code-block"># ì‘ì—… ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p /home/ubuntu/edu/{raw_data,reference,notebooks,results}

# 1. FASTQ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
cd /home/ubuntu/edu/raw_data
wget -O ERR3184150_top_1.fastq.gz "https://firebasestorage.googleapis.com/v0/b/deevo-pms.firebasestorage.app/o/projects%2FxarMbxJAWs2OZxbT52ge%2Fsamples%2FkAM4LgNHWPRwjOSNwIKs%2Ffiles%2FERR3184150_top_1_1751980180958.gz?alt=media&token=b0cd6eaa-eee9-4325-a326-5971596c1b28"

wget -O ERR3184150_top_2.fastq.gz "https://firebasestorage.googleapis.com/v0/b/deevo-pms.firebasestorage.app/o/projects%2FxarMbxJAWs2OZxbT52ge%2Fsamples%2FkAM4LgNHWPRwjOSNwIKs%2Ffiles%2FERR3184150_top_2_1751980180959.gz?alt=media&token=9ba9ce53-afaf-48e8-9c44-bcde89aff45f"

# 2. ì½© ì°¸ì¡° ê²Œë†ˆ ë‹¤ìš´ë¡œë“œ (SoyBase ê³µì‹)
cd /home/ubuntu/edu/reference
# ì½©(Glycine max) Wm82 genome v6 ë‹¤ìš´ë¡œë“œ
wget -O soybean_genome.fa.gz "https://data.soybase.org/Glycine/max/genomes/Wm82.gnm6.S97D/glyma.Wm82.gnm6.S97D.genome_main.fna.gz"

# ì••ì¶• í•´ì œ
gunzip soybean_genome.fa.gz

# 3. gVCF ë³€ì´ íŒŒì¼ ë‹¤ìš´ë¡œë“œ (ì‹¤ìŠµìš©)
cd /home/ubuntu/edu/variants
mkdir -p gvcf_samples

# ì½© ê²Œë†ˆ Chromosome 01 ë³€ì´ ë°ì´í„° (3ê°œ ìƒ˜í”Œ)
wget -O DRR145099.gvcf.var.Gm01.gz "https://firebasestorage.googleapis.com/v0/b/deevo-pms.firebasestorage.app/o/projects%2FxarMbxJAWs2OZxbT52ge%2Fsamples%2FkAM4LgNHWPRwjOSNwIKs%2Ffiles%2FDRR145099_1752076724814.gz?alt=media&token=eea4e60d-6f8a-4751-9418-76309a300c4d"

wget -O DRR151884.gvcf.var.Gm01.gz "https://firebasestorage.googleapis.com/v0/b/deevo-pms.firebasestorage.app/o/projects%2FxarMbxJAWs2OZxbT52ge%2Fsamples%2FkAM4LgNHWPRwjOSNwIKs%2Ffiles%2FDRR151884_1752076724814.gz?alt=media&token=099a31f7-c6f8-4e4c-a208-e7d219001e68"

wget -O DRR151901.gvcf.var.Gm01.gz "https://firebasestorage.googleapis.com/v0/b/deevo-pms.firebasestorage.app/o/projects%2FxarMbxJAWs2OZxbT52ge%2Fsamples%2FkAM4LgNHWPRwjOSNwIKs%2Ffiles%2FDRR151901_1752076724813.gz?alt=media&token=d701ebe4-4736-4d70-ab38-8f8cfa91ea3f"

# ì••ì¶• í•´ì œ
gunzip *.gz

# 4. ë‹¤ìš´ë¡œë“œ í™•ì¸
ls -lh /home/ubuntu/edu/raw_data/*.fastq.gz
ls -lh /home/ubuntu/edu/reference/*.fa
ls -lh /home/ubuntu/edu/variants/*.gvcf.var.Gm01

# notebooks ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•˜ì—¬ ì‹¤ìŠµ ì‹œì‘
cd /home/ubuntu/edu/notebooks</div>
        
        <div style="background: #e8f4fd; padding: 15px; margin: 15px 0; border-radius: 6px; border-left: 4px solid #3498db;">
            <h4 style="color: #1976d2; margin: 0 0 10px 0;"><i class="fas fa-dna"></i> ì‹¤ìŠµìš© gVCF ë³€ì´ ë°ì´í„° ì •ë³´</h4>
            <div class="comparison-table" style="margin-top: 10px;">
                <div class="comparison-item" style="border-left-color: #28a745; background: #ffffff;">
                    <h4>gVCF íŒŒì¼ íŠ¹ì§•</h4>
                    <ul style="font-size: 13px;">
                        <li><strong>íŒŒì¼ í˜•ì‹:</strong> .gvcf (Genomic VCF)</li>
                        <li><strong>ëŒ€ìƒ ì—¼ìƒ‰ì²´:</strong> Gm01 (ì½© 1ë²ˆ ì—¼ìƒ‰ì²´)</li>
                        <li><strong>ìƒ˜í”Œ ìˆ˜:</strong> 3ê°œ (DRR145099, DRR151884, DRR151901)</li>
                        <li><strong>ë°ì´í„° ì¶œì²˜:</strong> ì¼ë³¸ ì½© í’ˆì¢… ë³€ì´ ë°ì´í„°</li>
                        <li><strong>ìš©ë„:</strong> gVCF vs VCF ë¹„êµ ì‹¤ìŠµ</li>
                    </ul>
                </div>
                
                <div class="comparison-item" style="border-left-color: #17a2b8; background: #ffffff;">
                    <h4>ì‹¤ìŠµ í™œìš© ë°©ë²•</h4>
                    <ul style="font-size: 13px;">
                        <li><strong>ë¸”ë¡ ì••ì¶•:</strong> END íƒœê·¸ í™•ì¸</li>
                        <li><strong>&lt;NON_REF&gt;:</strong> ì°¸ì¡° ìœ„ì¹˜ ë¶„ì„</li>
                        <li><strong>ë³€ì´ í˜¸ì¶œ:</strong> ì‹¤ì œ SNP/INDEL í™•ì¸</li>
                        <li><strong>ë‹¤ì¤‘ ìƒ˜í”Œ:</strong> ìƒ˜í”Œ ê°„ ë³€ì´ ë¹„êµ</li>
                        <li><strong>í’ˆì§ˆ í‰ê°€:</strong> INFO í•„ë“œ ë¶„ì„</li>
                    </ul>
                </div>
            </div>
            
            <div style="margin-top: 15px; padding: 10px; background: #e3f2fd; border-radius: 4px;">
                <p style="margin: 0; font-size: 13px; color: #1565c0;">
                    <strong>ğŸ“Š ì‹¤ìŠµ ë°ì´í„° íŠ¹ì§•:</strong> ì´ gVCF íŒŒì¼ë“¤ì€ ì‹¤ì œ ì½© ê²Œë†ˆ ì—°êµ¬ì—ì„œ ìƒì„±ëœ ë°ì´í„°ë¡œ, 
                    GATK HaplotypeCallerì˜ ì¶œë ¥ í˜•íƒœë¥¼ ê·¸ëŒ€ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤. ë¸”ë¡ ì••ì¶•, &lt;NON_REF&gt; ì²˜ë¦¬, 
                    ë‹¤ì¤‘ ëŒ€ë¦½ìœ ì „ì ë“± gVCFì˜ ëª¨ë“  íŠ¹ì§•ì„ ì‹¤ìŠµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>
        </div>

        <div style="background: #fff3cd; padding: 15px; margin: 15px 0; border-radius: 6px; border-left: 4px solid #ffc107;">
            <h4 style="color: #856404; margin: 0 0 10px 0;"><i class="fas fa-seedling"></i> ì½©(Soybean) ì°¸ì¡° ê²Œë†ˆ ì •ë³´</h4>
            <div class="comparison-table" style="margin-top: 10px;">
                <div class="comparison-item" style="border-left-color: #28a745; background: #ffffff;">
                    <h4>Wm82 Genome v6 (SoyBase)</h4>
                    <ul style="font-size: 13px;">
                        <li><strong>í•™ëª…:</strong> Glycine max</li>
                        <li><strong>í’ˆì¢…:</strong> Williams 82 (Wm82)</li>
                        <li><strong>ë²„ì „:</strong> gnm6.S97D (ìµœì‹  ë²„ì „)</li>
                        <li><strong>ê²Œë†ˆ í¬ê¸°:</strong> ~1.1 Gb (1,115 Mb)</li>
                        <li><strong>ì—¼ìƒ‰ì²´:</strong> 20ê°œ (Chr01-Chr20)</li>
                    </ul>
                </div>
                
                <div class="comparison-item" style="border-left-color: #17a2b8; background: #ffffff;">
                    <h4>SoyBase ë°ì´í„°ë² ì´ìŠ¤</h4>
                    <ul style="font-size: 13px;">
                        <li><strong>ê³µì‹ DB:</strong> data.soybase.org</li>
                        <li><strong>ê³ í’ˆì§ˆ:</strong> íë ˆì´ì…˜ëœ ì°¸ì¡° ê²Œë†ˆ</li>
                        <li><strong>í‘œì¤€ ì°¸ì¡°:</strong> êµ­ì œì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í‘œì¤€</li>
                        <li><strong>ì£¼ì„ ì •ë³´:</strong> ìœ ì „ì ì£¼ì„ í¬í•¨</li>
                        <li><strong>ì—°êµ¬ í™œìš©:</strong> ì½© ì—°êµ¬ì˜ í‘œì¤€ ì°¸ì¡°</li>
                    </ul>
                </div>
            </div>
            
            <div style="margin-top: 15px; padding: 10px; background: #e3f2fd; border-radius: 4px;">
                <p style="margin: 0; font-size: 13px; color: #1565c0;">
                    <strong>ğŸ“Š Williams 82</strong>ëŠ” ì½© ì—°êµ¬ì—ì„œ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” í‘œì¤€ í’ˆì¢…ìœ¼ë¡œ, 
                    ì „ì„¸ê³„ ì½© ìœ ì „ì²´ ì—°êµ¬ì˜ ì°¸ì¡° ê²Œë†ˆìœ¼ë¡œ í™œìš©ë©ë‹ˆë‹¤.
                </p>
            </div>
        </div>

        <h2>ğŸ Python í™˜ê²½ ì„¤ì •</h2>
        
        <div class="setup-steps">
            <h3><i class="fas fa-code"></i> ê¸°ë³¸ ì„¤ì¹˜ëœ í™˜ê²½</h3>
            
            <p>EC2 ì¸ìŠ¤í„´ìŠ¤ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ìŒë§Œ ì„¤ì¹˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤:</p>
            
            <div class="comparison-table">
                <div class="comparison-item" style="border-left-color: #f39c12;">
                    <h4><i class="fas fa-flask"></i> ê¸°ë³¸ í™˜ê²½</h4>
                    <ul>
                        <li><strong>Ubuntu 22.04 LTS</strong></li>
                        <li><strong>Python 3.10</strong></li>
                        <li><strong>conda</strong> (íŒ¨í‚¤ì§€ ê´€ë¦¬ì)</li>
                        <li><strong>JupyterLab</strong> (ì‹¤ìŠµ í™˜ê²½)</li>
                        <li><strong>pip</strong> (íŒ¨í‚¤ì§€ ê´€ë¦¬ì)</li>
                    </ul>
                </div>
                
                <div class="comparison-item" style="border-left-color: #e74c3c;">
                    <h4><i class="fas fa-graduation-cap"></i> ì‹¤ìŠµì—ì„œ ì„¤ì¹˜í•  ë„êµ¬</h4>
                    <ul>
                        <li><strong>BioPython:</strong> ì„œì—´ ë¶„ì„ ë¼ì´ë¸ŒëŸ¬ë¦¬</li>
                        <li><strong>pandas, numpy:</strong> ë°ì´í„° ì²˜ë¦¬</li>
                        <li><strong>matplotlib, seaborn:</strong> ì‹œê°í™”</li>
                        <li><strong>FastQC:</strong> í’ˆì§ˆ í‰ê°€ ë„êµ¬</li>
                        <li><strong>BWA, SAMtools:</strong> ì •ë ¬ ë° ì²˜ë¦¬</li>
                        <li><strong>GATK4:</strong> ë³€ì´ í˜¸ì¶œ ë„êµ¬</li>
                    </ul>
                </div>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; margin: 15px 0; border-radius: 6px; border-left: 4px solid #ffc107;">
                <h4 style="color: #856404; margin: 0 0 10px 0;"><i class="fas fa-info-circle"></i> ì‹¤ìŠµ ëª©í‘œ</h4>
                <p style="color: #856404; margin: 0; font-size: 14px;">
                    ìƒë¬¼ì •ë³´í•™ ë„êµ¬ë“¤ì„ ì§ì ‘ ì„¤ì¹˜í•˜ê³  ì„¤ì •í•˜ëŠ” ê³¼ì •ì„ í†µí•´ ì‹¤ì œ ì—°êµ¬ í™˜ê²½ êµ¬ì¶• ë°©ë²•ì„ í•™ìŠµí•©ë‹ˆë‹¤.
                </p>
            </div>

            <h3>ğŸ“ ì‹¤ìŠµ ê³¼ì •</h3>
            <p>ì‹¤ìŠµì—ì„œëŠ” ë‹¤ìŒ ìˆœì„œë¡œ í™˜ê²½ì„ êµ¬ì¶•í•˜ê³  ë¶„ì„ì„ ì§„í–‰í•©ë‹ˆë‹¤:</p>
            <ol style="margin: 15px 0; padding-left: 30px;">
                <li><strong>ë°ì´í„° ë‹¤ìš´ë¡œë“œ:</strong> ERR3184150 FASTQ íŒŒì¼ ë° ì½© ì°¸ì¡° ê²Œë†ˆ íšë“</li>
                <li><strong>conda í™˜ê²½ ìƒì„±:</strong> ìƒë¬¼ì •ë³´í•™ ì „ìš© í™˜ê²½ êµ¬ì¶•</li>
                <li><strong>Python íŒ¨í‚¤ì§€ ì„¤ì¹˜:</strong> BioPython, pandas, matplotlib ë“±</li>
                <li><strong>ìƒë¬¼ì •ë³´í•™ ë„êµ¬ ì„¤ì¹˜:</strong> FastQC, BWA, SAMtools, GATK</li>
                <li><strong>ì°¸ì¡° ê²Œë†ˆ ì¸ë±ì‹±:</strong> BWA ë° SAMtools ì¸ë±ìŠ¤ ìƒì„±</li>
                <li><strong>ë°ì´í„° íƒìƒ‰:</strong> FASTQ íŒŒì¼ êµ¬ì¡° ì´í•´</li>
                <li><strong>í’ˆì§ˆ ê´€ë¦¬:</strong> ë°ì´í„° ì „ì²˜ë¦¬ ë° í•„í„°ë§</li>
                <li><strong>ê²Œë†ˆ ì •ë ¬:</strong> ì½© ì°¸ì¡° ê²Œë†ˆì— ëŒ€í•œ ë¦¬ë“œ ë§¤í•‘</li>
                <li><strong>ë³€ì´ í˜¸ì¶œ:</strong> SNP/INDEL ê²€ì¶œ ë° ë¶„ì„</li>
            </ol>
            
            <h3>ğŸ› ï¸ conda í™˜ê²½ ë° ë„êµ¬ ì„¤ì¹˜</h3>
            <p>ìƒë¬¼ì •ë³´í•™ ë¶„ì„ì„ ìœ„í•œ ì „ìš© conda í™˜ê²½ì„ ìƒì„±í•˜ê³  í•„ìš”í•œ ë„êµ¬ë“¤ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤:</p>
            
            <div class="code-block bash"># 1. conda í™˜ê²½ ìƒì„±
conda create -n bioinformatics python=3.10 -y
conda activate bioinformatics

# 2. Python íŒ¨í‚¤ì§€ ì„¤ì¹˜ (conda)
conda install -c conda-forge biopython pandas numpy matplotlib seaborn plotly jupyter -y

# 3. pysamì€ pipë¡œ ì„¤ì¹˜ (conda í˜¸í™˜ì„± ë¬¸ì œ ë°©ì§€)
pip install pysam

# 4. ìƒë¬¼ì •ë³´í•™ ë„êµ¬ ì„¤ì¹˜ (bioconda ì±„ë„)
conda install -c bioconda fastqc trimmomatic bwa samtools gatk4 bcftools -y

# 5. ì°¸ì¡° ê²Œë†ˆ ì¸ë±ìŠ¤ ìƒì„±
cd /home/ubuntu/edu/reference

# BWA ì¸ë±ìŠ¤ ìƒì„± (ì •ë ¬ìš©)
bwa index soybean_genome.fa

# SAMtools ì¸ë±ìŠ¤ ìƒì„± (GATKìš©)
samtools faidx soybean_genome.fa

# 6. ì„¤ì¹˜ ë° ì¸ë±ìŠ¤ ìƒì„± í™•ì¸
conda list | grep -E "(biopython|pandas|fastqc|bwa|samtools|gatk)"
pip list | grep pysam
ls -lh /home/ubuntu/edu/reference/soybean_genome.fa*</div>
            
            <div style="background: #e8f4fd; padding: 15px; margin: 15px 0; border-radius: 6px; border-left: 4px solid #3498db;">
                <h4 style="color: #1976d2; margin: 0 0 10px 0;"><i class="fas fa-info-circle"></i> ì„¤ì¹˜ ë°©ë²• ì„ íƒ ì´ìœ </h4>
                <ul style="color: #1976d2; margin: 0; font-size: 14px;">
                    <li><strong>conda:</strong> ëŒ€ë¶€ë¶„ì˜ íŒ¨í‚¤ì§€ë“¤ (dependency ê´€ë¦¬ ìš°ìˆ˜)</li>
                    <li><strong>pip (pysam):</strong> conda ë²„ì „ í˜¸í™˜ì„± ë¬¸ì œ ë°©ì§€</li>
                    <li><strong>bioconda:</strong> ìƒë¬¼ì •ë³´í•™ ì „ë¬¸ ë„êµ¬ë“¤ (8,000+ íŒ¨í‚¤ì§€)</li>
                </ul>
            </div>
        </div>

        <h2>âœ… ì„¤ì¹˜ ì™„ë£Œ í›„ í™˜ê²½ í™•ì¸</h2>
        <p>ëª¨ë“  ë„êµ¬ê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤:</p>
        
        <div class="code-block bash"># bioinformatics í™˜ê²½ í™œì„±í™”
conda activate bioinformatics

# Python íŒ¨í‚¤ì§€ í™•ì¸
python -c "import pandas, numpy, matplotlib, seaborn, Bio, pysam; print('âœ… Python íŒ¨í‚¤ì§€ ì •ìƒ')"

# ìƒë¬¼ì •ë³´í•™ ë„êµ¬ ë²„ì „ í™•ì¸
fastqc --version
bwa
samtools --version
gatk --version

# ë‹¤ìš´ë¡œë“œëœ ë°ì´í„° íŒŒì¼ í™•ì¸
ls -lh /home/ubuntu/edu/raw_data/ERR3184150_top_*.fastq.gz
ls -lh /home/ubuntu/edu/reference/soybean_genome.fa*

# ì½© ì°¸ì¡° ê²Œë†ˆ ì •ë³´ í™•ì¸
head -5 /home/ubuntu/edu/reference/soybean_genome.fa

# ì „ì²´ í™˜ê²½ ìš”ì•½
echo "ğŸ‰ ì„¤ì¹˜ ì™„ë£Œ! ì½© ê²Œë†ˆ WGS ë¶„ì„ ì¤€ë¹„ ì™„ë£Œ"</div>
        
        <div style="background: #f8f9fa; padding: 15px; margin: 15px 0; border-radius: 6px; border-left: 4px solid #6c757d;">
            <h4 style="color: #495057; margin: 0 0 10px 0;"><i class="fas fa-code"></i> JupyterLabì—ì„œ FASTQ ë¦¬ë“œ ìˆ˜ í™•ì¸ í…ŒìŠ¤íŠ¸</h4>
            <p style="color: #495057; margin: 0 0 10px 0; font-size: 14px;">
                í™˜ê²½ ì„¤ì •ì´ ì™„ë£Œë˜ë©´ JupyterLabì—ì„œ ë‹¤ìŒ Python ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì—¬ FASTQ íŒŒì¼ì˜ ë¦¬ë“œ ìˆ˜ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”:
            </p>
            
            <div class="code-block python">import gzip
import os

def count_reads(fastq_file):
    count = 0
    try:
        with gzip.open(fastq_file, 'rt') as f:
            for i, line in enumerate(f):
                if i % 4 == 0:
                    count += 1
        return count
    except:
        return 0

file1 = "/home/ubuntu/edu/raw_data/ERR3184150_top_1.fastq.gz"
file2 = "/home/ubuntu/edu/raw_data/ERR3184150_top_2.fastq.gz"

print("FASTQ íŒŒì¼ ë¶„ì„ ê²°ê³¼")
print("=" * 30)

if os.path.exists(file1):
    reads1 = count_reads(file1)
    print(f"R1 íŒŒì¼: {reads1:,} reads")
else:
    print("R1 íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")

if os.path.exists(file2):
    reads2 = count_reads(file2)
    print(f"R2 íŒŒì¼: {reads2:,} reads")
else:
    print("R2 íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")

total = reads1 + reads2
print(f"ì´ ë¦¬ë“œ ìˆ˜: {total:,}")
print("ë¶„ì„ ì™„ë£Œ")</div>
            
            <div style="margin-top: 15px; padding: 10px; background: #e3f2fd; border-radius: 4px;">
                <p style="margin: 0; font-size: 13px; color: #1565c0;">
                    <strong>ğŸ’¡ ì‚¬ìš©ë²•:</strong> JupyterLabì—ì„œ ìƒˆ ë…¸íŠ¸ë¶ì„ ìƒì„±í•˜ê³  ìœ„ ì½”ë“œë¥¼ ì…€ì— ë³µì‚¬í•œ í›„ ì‹¤í–‰í•˜ì„¸ìš”. 
                    ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì—ˆë‹¤ë©´ ê° FASTQ íŒŒì¼ì˜ ë¦¬ë“œ ê°œìˆ˜ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.
                </p>
            </div>
        </div>
        
        <div style="background: #f8f9fa; padding: 15px; margin: 15px 0; border-radius: 6px; border-left: 4px solid #6c757d;">
            <h4 style="color: #495057; margin: 0 0 10px 0;"><i class="fas fa-dna"></i> ì°¸ì¡° ê²Œë†ˆ í†µê³„ í™•ì¸ í…ŒìŠ¤íŠ¸</h4>
            <p style="color: #495057; margin: 0 0 10px 0; font-size: 14px;">
                ì½© ì°¸ì¡° ê²Œë†ˆ íŒŒì¼ì˜ ê¸°ë³¸ í†µê³„ ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” Python ì½”ë“œì…ë‹ˆë‹¤:
            </p>
            
            <div class="code-block python">#!/usr/bin/env python3
import os
from Bio import SeqIO
from collections import Counter

def analyze_reference_genome(fasta_file):
    """ì°¸ì¡° ê²Œë†ˆ FASTA íŒŒì¼ì˜ í†µê³„ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤."""
    
    if not os.path.exists(fasta_file):
        print(f"âŒ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {fasta_file}")
        return None
    
    print(f"ğŸ§¬ ì°¸ì¡° ê²Œë†ˆ ë¶„ì„: {os.path.basename(fasta_file)}")
    print("=" * 50)
    
    sequences = []
    total_length = 0
    chromosome_info = []
    
    try:
        # FASTA íŒŒì¼ ì½ê¸°
        with open(fasta_file, 'r') as handle:
            for record in SeqIO.parse(handle, "fasta"):
                seq_len = len(record.seq)
                sequences.append(record)
                total_length += seq_len
                chromosome_info.append({
                    'id': record.id,
                    'length': seq_len,
                    'description': record.description
                })
        
        # ê¸°ë³¸ í†µê³„
        print(f"ì´ ì„œì—´ ìˆ˜: {len(sequences):,}")
        print(f"ì „ì²´ ê²Œë†ˆ í¬ê¸°: {total_length:,} bp ({total_length/1_000_000:.1f} Mb)")
        
        # ì—¼ìƒ‰ì²´ ì •ë³´ (ìƒìœ„ 10ê°œ)
        print(f"\nğŸ“Š ì—¼ìƒ‰ì²´/ì„œì—´ ì •ë³´ (ìƒìœ„ 10ê°œ):")
        chromosome_info.sort(key=lambda x: x['length'], reverse=True)
        
        for i, chr_info in enumerate(chromosome_info[:10], 1):
            chr_id = chr_info['id']
            chr_len = chr_info['length']
            print(f"{i:2d}. {chr_id}: {chr_len:,} bp ({chr_len/1_000_000:.2f} Mb)")
        
        if len(chromosome_info) > 10:
            print(f"    ... ë° {len(chromosome_info)-10}ê°œ ì¶”ê°€ ì„œì—´")
        
        # ì—¼ê¸° ì¡°ì„± ë¶„ì„ (ì²« ë²ˆì§¸ ì—¼ìƒ‰ì²´ë§Œ)
        if sequences:
            first_seq = str(sequences[0].seq).upper()
            base_count = Counter(first_seq)
            
            print(f"\nğŸ§ª ì—¼ê¸° ì¡°ì„± ë¶„ì„ ({sequences[0].id}):")
            total_bases = sum(base_count.values())
            
            for base in ['A', 'T', 'G', 'C', 'N']:
                count = base_count.get(base, 0)
                percentage = (count / total_bases) * 100 if total_bases > 0 else 0
                print(f"  {base}: {count:,} ({percentage:.2f}%)")
            
            gc_content = (base_count.get('G', 0) + base_count.get('C', 0)) / total_bases * 100
            print(f"  GC í•¨ëŸ‰: {gc_content:.2f}%")
        
        print("\nâœ… ì°¸ì¡° ê²Œë†ˆ ë¶„ì„ ì™„ë£Œ!")
        return True
        
    except Exception as e:
        print(f"âŒ ë¶„ì„ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}")
        return False

# ì½© ì°¸ì¡° ê²Œë†ˆ ë¶„ì„ ì‹¤í–‰
reference_file = "/home/ubuntu/edu/reference/soybean_genome.fa"
analyze_reference_genome(reference_file)</div>
            
            <div style="margin-top: 15px; padding: 10px; background: #fff3cd; border-radius: 4px;">
                <p style="margin: 0; font-size: 13px; color: #856404;">
                    <strong>âš ï¸ ì£¼ì˜:</strong> ì´ ì½”ë“œëŠ” BioPythonì´ ì„¤ì¹˜ëœ í›„ì— ì‹¤í–‰í•˜ì„¸ìš”. 
                    ì°¸ì¡° ê²Œë†ˆ íŒŒì¼ì´ í¬ë¯€ë¡œ ë¶„ì„ì— ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>
            
            <div style="margin-top: 15px; padding: 10px; background: #e3f2fd; border-radius: 4px;">
                <p style="margin: 0; font-size: 13px; color: #1565c0;">
                    <strong>ğŸ”¬ ë¶„ì„ ë‚´ìš©:</strong> ì´ ì½”ë“œëŠ” ì½© ì°¸ì¡° ê²Œë†ˆì˜ ì´ í¬ê¸°, ì—¼ìƒ‰ì²´ ìˆ˜, 
                    ê° ì—¼ìƒ‰ì²´ ê¸¸ì´, ì—¼ê¸° ì¡°ì„±(A, T, G, C, N), GC í•¨ëŸ‰ ë“±ì„ ë¶„ì„í•©ë‹ˆë‹¤.
                </p>
            </div>
        </div>
        
        <div style="background: #d4edda; padding: 15px; margin: 15px 0; border-radius: 6px; border-left: 4px solid #28a745;">
            <h4 style="color: #155724; margin: 0 0 10px 0;"><i class="fas fa-check-circle"></i> ì„¤ì¹˜ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸</h4>
            <ul style="color: #155724; margin: 0; font-size: 14px;">
                <li>âœ… conda í™˜ê²½ (bioinformatics) ìƒì„± ì™„ë£Œ</li>
                <li>âœ… Python íŒ¨í‚¤ì§€ (pandas, BioPython, pysam ë“±) ì„¤ì¹˜ ì™„ë£Œ</li>
                <li>âœ… ìƒë¬¼ì •ë³´í•™ ë„êµ¬ (FastQC, BWA, SAMtools, GATK) ì„¤ì¹˜ ì™„ë£Œ</li>
                <li>âœ… ERR3184150 FASTQ ë°ì´í„° (ì½© ì‹œí€€ì‹±) ë‹¤ìš´ë¡œë“œ ì™„ë£Œ</li>
                <li>âœ… ì½©(Glycine max) ì°¸ì¡° ê²Œë†ˆ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ</li>
                <li>âœ… BWA ë° SAMtools ì¸ë±ìŠ¤ ìƒì„± ì™„ë£Œ</li>
                <li>ğŸš€ ì½© ê²Œë†ˆ WGS ë¶„ì„ ì¤€ë¹„ ì™„ë£Œ!</li>
            </ul>
        </div>
    </div>
</div>

<div class="navigation">
    <button class="jump-btn" onclick="jumpToIndex()">ğŸ  ëª©ì°¨</button>
    <button class="nav-btn" onclick="prevSlide()">â—€ ì´ì „</button>
    <button class="nav-btn" onclick="nextSlide()">ë‹¤ìŒ â–¶</button>
    <button class="fullscreen-btn" onclick="toggleFullscreen()">â›¶ ì „ì²´í™”ë©´</button>
</div>

<div class="slide-number">ìŠ¬ë¼ì´ë“œ 1 / 8</div>

<script>
    function prevSlide() {
        window.location.href = "index.html";
    }
    
    function nextSlide() {
        window.location.href = "slide02.html";
    }
    
    function jumpToIndex() {
        window.location.href = "index.html";
    }
    
    function toggleFullscreen() {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
        } else {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            }
        }
    }
    
    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowRight' || e.key === ' ') {
            nextSlide();
        } else if (e.key === 'ArrowLeft') {
            prevSlide();
        } else if (e.key === 'Home') {
            jumpToIndex();
        } else if (e.key === 'F11') {
            e.preventDefault();
            toggleFullscreen();
        }
    });
    
    // Syntax highlighting function
    function highlightCode() {
        const codeBlocks = document.querySelectorAll('.code-block');
        
        codeBlocks.forEach(block => {
            const code = block.textContent;
            const language = block.classList.contains('python') ? 'python' : 
                           block.classList.contains('bash') ? 'bash' : 'python'; // default to python
            
            const highlightedCode = highlightSyntax(code, language);
            block.innerHTML = highlightedCode;
            
            // Add copy button
            addCopyButton(block, code);
        });
    }
    
    // Add copy button to code block
    function addCopyButton(codeBlock, originalCode) {
        const copyButton = document.createElement('button');
        copyButton.className = 'copy-button';
        copyButton.textContent = 'Copy';
        copyButton.title = 'Copy code to clipboard';
        
        copyButton.addEventListener('click', function() {
            copyToClipboard(originalCode, copyButton);
        });
        
        codeBlock.appendChild(copyButton);
    }
    
    // Copy text to clipboard
    function copyToClipboard(text, button) {
        if (navigator.clipboard && navigator.clipboard.writeText) {
            // Modern approach
            navigator.clipboard.writeText(text).then(function() {
                showCopySuccess(button);
            }).catch(function() {
                fallbackCopyToClipboard(text, button);
            });
        } else {
            // Fallback for older browsers
            fallbackCopyToClipboard(text, button);
        }
    }
    
    // Fallback copy method
    function fallbackCopyToClipboard(text, button) {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        textArea.style.position = 'fixed';
        textArea.style.left = '-999999px';
        textArea.style.top = '-999999px';
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        
        try {
            document.execCommand('copy');
            showCopySuccess(button);
        } catch (err) {
            console.error('Copy failed:', err);
        }
        
        document.body.removeChild(textArea);
    }
    
    // Show copy success feedback
    function showCopySuccess(button) {
        const originalText = button.textContent;
        button.textContent = 'Copied!';
        button.classList.add('copied');
        
        setTimeout(function() {
            button.textContent = originalText;
            button.classList.remove('copied');
        }, 2000);
    }
    
    function highlightSyntax(code, language) {
        if (language === 'python') {
            return highlightPython(code);
        } else if (language === 'bash') {
            return highlightBash(code);
        }
        return code;
    }
    
    function highlightPython(code) {
        let highlighted = code;
        
        // 1. Highlight strings first
        highlighted = highlighted.replace(/"[^"]*"/g, '<span class="string">$&</span>');
        highlighted = highlighted.replace(/'[^']*'/g, '<span class="string">$&</span>');
        
        // 2. Highlight comments
        highlighted = highlighted.replace(/#.*$/gm, '<span class="comment">$&</span>');
        
        // 3. Highlight keywords
        const keywords = ['import', 'from', 'def', 'if', 'else', 'elif', 'for', 'while', 'try', 'except', 'with', 'as', 'return', 'and', 'or', 'not', 'in', 'is', 'True', 'False', 'None'];
        keywords.forEach(keyword => {
            const regex = new RegExp(`\\b${keyword}\\b`, 'g');
            highlighted = highlighted.replace(regex, `<span class="keyword">${keyword}</span>`);
        });
        
        // 4. Highlight built-in functions
        const builtins = ['print', 'len', 'open', 'range', 'enumerate', 'gzip', 'os'];
        builtins.forEach(builtin => {
            const regex = new RegExp(`\\b${builtin}\\b`, 'g');
            highlighted = highlighted.replace(regex, `<span class="builtin">${builtin}</span>`);
        });
        
        // 5. Highlight function definitions
        highlighted = highlighted.replace(/\b(def\s+)(\w+)/g, '$1<span class="function">$2</span>');
        
        // 6. Highlight numbers
        highlighted = highlighted.replace(/\b\d+\b/g, '<span class="number">$&</span>');
        
        return highlighted;
    }
    
    function highlightBash(code) {
        const keywords = ['if', 'then', 'else', 'elif', 'fi', 'for', 'while', 'do', 'done', 'case', 'esac', 'function', 'return', 'local', 'export', 'echo', 'cd', 'ls', 'mkdir', 'cp', 'mv', 'rm', 'chmod', 'chown', 'grep', 'sed', 'awk', 'sort', 'uniq', 'wc', 'cat', 'head', 'tail'];
        
        // Split into lines to process line by line (avoids conflicts)
        const lines = code.split('\n');
        const highlightedLines = [];
        
        for (let line of lines) {
            let highlighted = line;
            
            // Skip if line is empty
            if (!highlighted.trim()) {
                highlightedLines.push(highlighted);
                continue;
            }
            
            // 1. Highlight shebang
            if (highlighted.match(/^#!/)) {
                highlighted = highlighted.replace(/^(#!.*)$/, '<span class="shebang">$1</span>');
                highlightedLines.push(highlighted);
                continue;
            }
            
            // 2. Highlight full-line comments
            if (highlighted.trim().startsWith('#')) {
                highlighted = highlighted.replace(/^(\s*)(#.*)$/, '$1<span class="comment">$2</span>');
                highlightedLines.push(highlighted);
                continue;
            }
            
            // 3. Highlight strings
            highlighted = highlighted.replace(/("[^"]*")/g, '<span class="string">$1</span>');
            highlighted = highlighted.replace(/('[^']*')/g, '<span class="string">$1</span>');
            
            // 4. Highlight inline comments (after code)
            highlighted = highlighted.replace(/(\s+)(#.*)$/, '$1<span class="comment">$2</span>');
            
            // 5. Highlight variables
            highlighted = highlighted.replace(/(\$\w+)/g, '<span class="variable">$1</span>');
            
            // 6. Highlight keywords
            keywords.forEach(keyword => {
                const regex = new RegExp(`\\b${keyword}\\b`, 'g');
                highlighted = highlighted.replace(regex, `<span class="keyword">${keyword}</span>`);
            });
            
            highlightedLines.push(highlighted);
        }
        
        return highlightedLines.join('\n');
    }
    
    // Apply syntax highlighting when page loads
    document.addEventListener('DOMContentLoaded', highlightCode);
</script>

</body>
</html>