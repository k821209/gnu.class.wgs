<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>실습 2: 품질 관리 및 전처리 - FastQC와 Trimmomatic 실습</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body { font-family: 'Malgun Gothic', Arial, sans-serif; margin: 0; padding: 0; background: #f5f5f5; }
        .slide { width: 100%; height: 100vh; display: block; padding: 40px; box-sizing: border-box; background: white; }
        .slide-title { font-size: 36px; font-weight: bold; color: #2c3e50; margin-bottom: 30px; border-bottom: 3px solid #e67e22; padding-bottom: 10px; }
        .slide-content { font-size: 18px; line-height: 1.6; color: #34495e; }
        .slide-content h2 { color: #e67e22; font-size: 24px; margin-top: 30px; }
        .slide-content h3 { color: #e74c3c; font-size: 20px; margin-top: 20px; }
        .slide-content ul { margin: 15px 0; padding-left: 30px; }
        .slide-content li { margin: 8px 0; }
        .highlight { background: #fff3cd; padding: 3px 8px; border-radius: 3px; }
        .code-block { background: #1e1e1e; color: #f8f8f2; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; margin: 15px 0; font-size: 14px; white-space: pre-wrap; border: 1px solid #444; position: relative; }
        .code-block-container { position: relative; }
        .copy-button { position: absolute; top: 10px; right: 10px; background: #444; color: #f8f8f2; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px; opacity: 0.7; transition: opacity 0.2s; }
        .copy-button:hover { opacity: 1; background: #555; }
        .copy-button.copied { background: #27ae60; color: white; }
        .copy-button.copied:after { content: " ✓"; }
        
        /* Syntax highlighting color classes */
        .comment { color: #75715e; } /* Comments */
        .keyword { color: #f92672; } /* Keywords */
        .function { color: #a6e22e; } /* Function names */
        .string { color: #e6db74; } /* Strings */
        .number { color: #ae81ff; } /* Numbers */
        .param { color: #fd971f; } /* Parameters */
        .variable { color: #f8f8f2; } /* Variables */
        .builtin { color: #a6e22e; } /* Built-in functions */
        .operator { color: #f92672; } /* Operators */
        .shebang { color: #75715e; } /* Shebang */
        .navigation { position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
        .nav-btn { background: #e67e22; color: white; border: none; padding: 10px 20px; margin: 0 5px; border-radius: 5px; cursor: pointer; }
        .nav-btn:hover { background: #d35400; }
        .fullscreen-btn { background: #e74c3c; color: white; border: none; padding: 10px 15px; margin: 0 5px; border-radius: 5px; cursor: pointer; }
        .fullscreen-btn:hover { background: #c0392b; }
        .jump-btn { background: #3498db; color: white; border: none; padding: 10px 15px; margin: 0 5px; border-radius: 5px; cursor: pointer; }
        .jump-btn:hover { background: #2980b9; }
        .slide-number { position: fixed; bottom: 20px; left: 20px; color: #7f8c8d; font-size: 14px; }
        .comparison-table { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .comparison-item { background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #e67e22; }
        .comparison-item h4 { margin: 0 0 10px 0; color: #2c3e50; }
        .setup-steps { background: #e8f4fd; border-left: 4px solid #3498db; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .practical-box { background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin: 20px 0; }
        .exercise-box { background: #fff3cd; border-left: 4px solid #ffc107; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .result-box { background: #d4edda; border-left: 4px solid #28a745; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .warning-box { background: #f8d7da; border-left: 4px solid #dc3545; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .step-box { background: #ffffff; border: 2px solid #e67e22; border-radius: 8px; padding: 15px; margin: 10px 0; position: relative; }
        .step-box::before { content: "→"; position: absolute; right: -15px; top: 50%; transform: translateY(-50%); font-size: 24px; color: #e67e22; }
        .step-box:last-child::before { display: none; }
        .terminal-output { background: #2c3e50; color: #ecf0f1; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; margin: 15px 0; font-size: 13px; white-space: pre-wrap; }
    </style>
</head>
<body>

<div class="slide">
    <div class="slide-title">🔧 실습 2: 품질 관리 및 전처리</div>
    <div class="slide-content">
        <h2>🎯 실습 목표</h2>
        <p>실제 콩 게놈 데이터를 사용하여 FastQC로 품질을 평가하고, Trimmomatic으로 전처리를 수행하는 완전한 실습을 진행합니다.</p>

        <div class="comparison-table">
            <div class="comparison-item">
                <h4><i class="fas fa-bullseye"></i> 학습 목표</h4>
                <ul>
                    <li>FastQC 보고서 해석</li>
                    <li>Trimmomatic 매개변수 설정</li>
                    <li>품질 개선 전후 비교</li>
                    <li>전처리 결과 검증</li>
                    <li>파일 크기 및 통계 분석</li>
                </ul>
            </div>
            
            <div class="comparison-item" style="border-left-color: #e74c3c;">
                <h4><i class="fas fa-tools"></i> 사용 도구</h4>
                <ul>
                    <li><strong>FastQC:</strong> 품질 평가 및 보고서 생성</li>
                    <li><strong>Trimmomatic:</strong> 어댑터 제거 및 품질 필터링</li>
                    <li><strong>MultiQC:</strong> 다중 샘플 결과 통합</li>
                    <li><strong>Python:</strong> 결과 분석 및 시각화</li>
                </ul>
            </div>
        </div>

        <h2>📋 실습 워크플로우</h2>
        <div class="practical-box">
            <div class="step-box">
                <h4><i class="fas fa-file-download"></i> 1단계: 원본 데이터 확인</h4>
                <p>실습 데이터 위치 확인 및 파일 무결성 검사</p>
            </div>

            <div class="step-box">
                <h4><i class="fas fa-chart-line"></i> 2단계: FastQC 품질 평가</h4>
                <p>원본 FASTQ 파일에 대한 품질 분석 및 보고서 생성</p>
            </div>

            <div class="step-box">
                <h4><i class="fas fa-cut"></i> 3단계: Trimmomatic 전처리</h4>
                <p>어댑터 제거 및 품질 필터링 수행</p>
            </div>

            <div class="step-box">
                <h4><i class="fas fa-check-circle"></i> 4단계: 결과 검증</h4>
                <p>전처리 후 품질 재평가 및 개선 효과 확인</p>
            </div>
        </div>

        <h2>🔍 1단계: 원본 데이터 확인</h2>
        <div class="setup-steps">
            <h3><i class="fas fa-folder-open"></i> 데이터 디렉토리 구조 확인</h3>
            
            <div class="code-block-container">
                <div class="code-block bash">
# 실습 디렉토리로 이동
cd /home/ubuntu/edu/

# 데이터 디렉토리 구조 확인
tree soybean_data/ -L 2

# 또는 ls 명령어 사용
ls -la soybean_data/
</div>
            </div>

            <div class="code-block-container">
                <div class="code-block bash">
# FASTQ 파일 상세 정보 확인
ls -lh soybean_data/*.fastq.gz

# 파일 개수 확인
ls soybean_data/*.fastq.gz | wc -l

# 압축 파일 무결성 검사
for file in soybean_data/*.fastq.gz; do
    echo "검사 중: $file"
    gzip -t "$file" && echo "✅ 정상" || echo "❌ 손상됨"
done
</div>
            </div>

            <div class="terminal-output">
예상 출력:
-rw-r--r-- 1 ubuntu ubuntu 1.2G Dec 15 10:30 ERR3184150_1.fastq.gz
-rw-r--r-- 1 ubuntu ubuntu 1.3G Dec 15 10:30 ERR3184150_2.fastq.gz
-rw-r--r-- 1 ubuntu ubuntu 1.1G Dec 15 10:30 ERR3184151_1.fastq.gz
-rw-r--r-- 1 ubuntu ubuntu 1.2G Dec 15 10:30 ERR3184151_2.fastq.gz
</div>
        </div>

        <h2>📊 2단계: FastQC 품질 평가</h2>
        <div class="setup-steps">
            <h3><i class="fas fa-play"></i> FastQC 실행</h3>
            
            <div class="code-block-container">
                <div class="code-block bash">
# FastQC 출력 디렉토리 생성
mkdir -p fastqc_results/raw_data

# 모든 FASTQ 파일에 대해 FastQC 실행
fastqc -o fastqc_results/raw_data/ \
       -t 4 \
       soybean_data/*.fastq.gz

# 진행 상황 확인
echo "FastQC 분석 완료!"
ls -la fastqc_results/raw_data/
</div>
            </div>

            <div class="warning-box">
                <h4><i class="fas fa-clock"></i> 실행 시간 안내</h4>
                <p>FASTQ 파일 크기에 따라 2-5분 정도 소요될 수 있습니다. 완료될 때까지 기다려주세요.</p>
            </div>
        </div>

        <div class="setup-steps">
            <h3><i class="fas fa-chart-bar"></i> FastQC 보고서 분석</h3>
            
            <div class="code-block-container">
                <div class="code-block bash">
# HTML 보고서 파일 확인
ls fastqc_results/raw_data/*.html

# 브라우저에서 보고서 열기 (예시)
# 실제로는 파일 매니저에서 HTML 파일을 더블클릭하거나
# JupyterLab에서 파일을 열어서 확인
</div>
            </div>

            <div class="exercise-box">
                <h4><i class="fas fa-search"></i> 보고서 분석 체크리스트</h4>
                <p>각 샘플의 FastQC 보고서에서 다음 항목들을 확인해보세요:</p>
                <ul>
                    <li><strong>Per base sequence quality:</strong> 위치별 품질 점수</li>
                    <li><strong>Per sequence quality scores:</strong> 전체 시퀀스 품질 분포</li>
                    <li><strong>Per base sequence content:</strong> 위치별 염기 조성</li>
                    <li><strong>Per sequence GC content:</strong> GC 함량 분포</li>
                    <li><strong>Adapter Content:</strong> 어댑터 오염 정도</li>
                    <li><strong>Overrepresented sequences:</strong> 과도하게 반복되는 서열</li>
                </ul>
            </div>
        </div>


        <h2>✂️ 3단계: Trimmomatic 전처리</h2>
        <div class="setup-steps">
            <h3><i class="fas fa-cogs"></i> Trimmomatic 매개변수 설정</h3>
            
            <div class="code-block-container">
                <div class="code-block bash">
# 출력 디렉토리 생성
mkdir -p trimmed_data

# 어댑터 파일 위치 확인
ls $CONDA_PREFIX/share/trimmomatic/adapters/TruSeq3-PE.fa

# 또는 conda가 설치되지 않은 경우
# 미리 준비된 어댑터 파일 사용
cat > TruSeq3-PE.fa << 'EOF'
>PrefixPE/1
TACACTCTTTCCCTACACGACGCTCTTCCGATCT
>PrefixPE/2
GTGACTGGAGTTCAGACGTGTGCTCTTCCGATCT
EOF
</div>
            </div>
        </div>

        <div class="setup-steps">
            <h3><i class="fas fa-cut"></i> Paired-End 전처리 실행</h3>
            
            <div class="code-block-container">
                <div class="code-block bash">
# 첫 번째 샘플 전처리 (ERR3184150)
trimmomatic PE -threads 4 \
    soybean_data/ERR3184150_1.fastq.gz \
    soybean_data/ERR3184150_2.fastq.gz \
    trimmed_data/ERR3184150_1_paired.fastq.gz \
    trimmed_data/ERR3184150_1_unpaired.fastq.gz \
    trimmed_data/ERR3184150_2_paired.fastq.gz \
    trimmed_data/ERR3184150_2_unpaired.fastq.gz \
    ILLUMINACLIP:TruSeq3-PE.fa:2:30:10 \
    LEADING:3 \
    TRAILING:3 \
    SLIDINGWINDOW:4:15 \
    MINLEN:36

echo "첫 번째 샘플 전처리 완료!"
</div>
            </div>

            <div class="code-block-container">
                <div class="code-block bash">
# 두 번째 샘플 전처리 (ERR3184151)
trimmomatic PE -threads 4 \
    soybean_data/ERR3184151_1.fastq.gz \
    soybean_data/ERR3184151_2.fastq.gz \
    trimmed_data/ERR3184151_1_paired.fastq.gz \
    trimmed_data/ERR3184151_1_unpaired.fastq.gz \
    trimmed_data/ERR3184151_2_paired.fastq.gz \
    trimmed_data/ERR3184151_2_unpaired.fastq.gz \
    ILLUMINACLIP:TruSeq3-PE.fa:2:30:10 \
    LEADING:3 \
    TRAILING:3 \
    SLIDINGWINDOW:4:15 \
    MINLEN:36

echo "두 번째 샘플 전처리 완료!"
</div>
            </div>

            <div class="terminal-output">
예상 출력:
Input Read Pairs: 1000000 Both Surviving: 876543 (87.65%) Forward Only Surviving: 45678 (4.57%) Reverse Only Surviving: 23456 (2.35%) Dropped: 54323 (5.43%)
</div>
        </div>

        <div class="setup-steps">
            <h3><i class="fas fa-chart-line"></i> 전처리 결과 분석</h3>
            
            <div class="code-block-container">
                <div class="code-block bash">
# 전처리 결과 파일 확인
ls -lh trimmed_data/

# 파일 크기 비교
echo "=== 원본 vs 전처리 파일 크기 비교 ==="
echo "원본 파일:"
ls -lh soybean_data/*.fastq.gz
echo ""
echo "전처리 파일:"
ls -lh trimmed_data/*_paired.fastq.gz
</div>
            </div>

        </div>

        <h2>🔄 4단계: 전처리 후 품질 재평가</h2>
        <div class="setup-steps">
            <h3><i class="fas fa-check-circle"></i> 전처리 데이터 FastQC 분석</h3>
            
            <div class="code-block-container">
                <div class="code-block bash">
# 전처리 데이터 FastQC 분석
mkdir -p fastqc_results/trimmed_data

fastqc -o fastqc_results/trimmed_data/ \
       -t 4 \
       trimmed_data/*_paired.fastq.gz

echo "전처리 데이터 FastQC 분석 완료!"
</div>
            </div>
        </div>

        <div class="setup-steps">
            <h3><i class="fas fa-balance-scale"></i> 전후 비교 분석</h3>
            
            
        </div>

        <h2>📋 실습 결과 검증</h2>
        <div class="result-box">
            <h3><i class="fas fa-check-circle"></i> 실습 완료 체크리스트</h3>
            <ul>
                <li>✅ 원본 FASTQ 파일 무결성 확인 완료</li>
                <li>✅ FastQC 품질 평가 보고서 생성 완료</li>
                <li>✅ Trimmomatic 전처리 실행 완료</li>
                <li>✅ 전처리 후 품질 재평가 완료</li>
                <li>✅ 생존율 85% 이상 달성 확인</li>
                <li>✅ 어댑터 오염 제거 확인</li>
                <li>✅ 전후 비교 분석 완료</li>
            </ul>
        </div>

        <div class="exercise-box">
            <h3><i class="fas fa-tasks"></i> 추가 실습 과제</h3>
            <ol>
                <li><strong>매개변수 최적화:</strong> 다른 SLIDINGWINDOW 값(예: 4:20)으로 재실행하고 결과 비교</li>
                <li><strong>MultiQC 활용:</strong> 여러 샘플의 FastQC 결과를 MultiQC로 통합 분석</li>
                <li><strong>어댑터 검출:</strong> 전처리 전 리드에서 어댑터 서열 검출 스크립트 작성</li>
                <li><strong>품질 필터링:</strong> 다양한 MINLEN 값의 영향 분석</li>
            </ol>
        </div>

        <div class="warning-box">
            <h3><i class="fas fa-exclamation-triangle"></i> 주의사항</h3>
            <ul>
                <li>전처리 시 생존율이 70% 미만인 경우 매개변수 조정 필요</li>
                <li>과도한 품질 필터링은 데이터 손실을 야기할 수 있음</li>
                <li>샘플별로 최적 매개변수가 다를 수 있음</li>
                <li>전처리 후 반드시 FastQC로 결과 검증 필요</li>
            </ul>
        </div>

        <h2>🎯 다음 단계</h2>
        <p>품질 관리가 완료된 데이터를 사용하여 다음 실습에서는 참조 게놈 정렬을 진행하겠습니다.</p>

    </div>
</div>

<div class="navigation">
    <button class="jump-btn" onclick="jumpToIndex()">🏠 목차</button>
    <button class="nav-btn" onclick="prevSlide()">◀ 이전</button>
    <button class="nav-btn" onclick="nextSlide()">다음 ▶</button>
    <button class="fullscreen-btn" onclick="toggleFullscreen()">⛶ 전체화면</button>
</div>

<div class="slide-number">슬라이드 5 / 8</div>

<script>
    // Syntax highlighting function
    function highlightCode() {
        const codeBlocks = document.querySelectorAll('.code-block');
        
        codeBlocks.forEach(block => {
            const code = block.textContent;
            const language = block.classList.contains('python') ? 'python' : 
                           block.classList.contains('bash') ? 'bash' : 'bash'; // default to bash
            
            const highlightedCode = highlightSyntax(code, language);
            block.innerHTML = highlightedCode;
            
            // Add copy button
            addCopyButton(block, code);
        });
    }
    
    // Add copy button to code block
    function addCopyButton(codeBlock, originalCode) {
        // Check if copy button already exists
        const container = codeBlock.parentElement;
        if (container && container.querySelector('.copy-button')) {
            return; // Copy button already exists
        }
        
        const copyButton = document.createElement('button');
        copyButton.className = 'copy-button';
        copyButton.textContent = 'Copy';
        copyButton.title = 'Copy code to clipboard';
        
        copyButton.addEventListener('click', function() {
            copyToClipboard(originalCode, copyButton);
        });
        
        // Append to container if it exists, otherwise to code block
        if (container && container.classList.contains('code-block-container')) {
            container.appendChild(copyButton);
        } else {
            codeBlock.style.position = 'relative'; // Ensure positioning context
            codeBlock.appendChild(copyButton);
        }
    }
    
    // Copy text to clipboard
    function copyToClipboard(text, button) {
        if (navigator.clipboard && navigator.clipboard.writeText) {
            // Modern approach
            navigator.clipboard.writeText(text).then(function() {
                showCopySuccess(button);
            }).catch(function() {
                fallbackCopyToClipboard(text, button);
            });
        } else {
            // Fallback for older browsers
            fallbackCopyToClipboard(text, button);
        }
    }
    
    // Fallback copy method
    function fallbackCopyToClipboard(text, button) {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        textArea.style.position = 'fixed';
        textArea.style.left = '-999999px';
        textArea.style.top = '-999999px';
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        
        try {
            document.execCommand('copy');
            showCopySuccess(button);
        } catch (err) {
            console.error('Copy failed:', err);
        }
        
        document.body.removeChild(textArea);
    }
    
    // Show copy success feedback
    function showCopySuccess(button) {
        const originalText = button.textContent;
        button.textContent = 'Copied!';
        button.classList.add('copied');
        
        setTimeout(function() {
            button.textContent = originalText;
            button.classList.remove('copied');
        }, 2000);
    }
    
    function highlightSyntax(code, language) {
        if (language === 'python') {
            return highlightPython(code);
        } else if (language === 'bash') {
            return highlightBash(code);
        }
        return code;
    }
    
    function highlightPython(code) {
        let highlighted = code;
        
        // 1. Highlight strings first
        highlighted = highlighted.replace(/"[^"]*"/g, '<span class="string">$&</span>');
        highlighted = highlighted.replace(/'[^']*'/g, '<span class="string">$&</span>');
        
        // 2. Highlight comments
        highlighted = highlighted.replace(/#.*$/gm, '<span class="comment">$&</span>');
        
        // 3. Highlight keywords
        const keywords = ['import', 'from', 'def', 'if', 'else', 'elif', 'for', 'while', 'try', 'except', 'with', 'as', 'return', 'and', 'or', 'not', 'in', 'is', 'True', 'False', 'None'];
        keywords.forEach(keyword => {
            const regex = new RegExp(`\\b${keyword}\\b`, 'g');
            highlighted = highlighted.replace(regex, `<span class="keyword">${keyword}</span>`);
        });
        
        // 4. Highlight built-in functions
        const builtins = ['print', 'len', 'open', 'range', 'enumerate', 'gzip', 'os', 'plt', 'np', 'Counter', 'Path', 'subprocess', 'str', 'int', 'float', 'list', 'dict', 'set', 'tuple', 'zip', 'sorted', 'sum', 'max', 'min', 'time', 'pd', 'sns'];
        builtins.forEach(builtin => {
            const regex = new RegExp(`\\b${builtin}\\b`, 'g');
            highlighted = highlighted.replace(regex, `<span class="builtin">${builtin}</span>`);
        });
        
        // 5. Highlight function definitions
        highlighted = highlighted.replace(/\b(def\s+)(\w+)/g, '$1<span class="function">$2</span>');
        
        // 6. Highlight numbers
        highlighted = highlighted.replace(/\b\d+\b/g, '<span class="number">$&</span>');
        
        return highlighted;
    }
    
    function highlightBash(code) {
        const keywords = ['if', 'then', 'else', 'elif', 'fi', 'for', 'while', 'do', 'done', 'case', 'esac', 'function', 'return', 'local', 'export', 'echo', 'cd', 'ls', 'mkdir', 'cp', 'mv', 'rm', 'chmod', 'chown', 'grep', 'sed', 'awk', 'sort', 'uniq', 'wc', 'cat', 'head', 'tail', 'conda', 'wget', 'unzip', 'fastqc', 'trimmomatic', 'du', 'file', 'tree', 'gzip'];
        
        // Split into lines to process line by line (avoids conflicts)
        const lines = code.split('\n');
        const highlightedLines = [];
        
        for (let line of lines) {
            let highlighted = line;
            
            // Skip if line is empty
            if (!highlighted.trim()) {
                highlightedLines.push(highlighted);
                continue;
            }
            
            // 1. Highlight shebang
            if (highlighted.match(/^#!/)) {
                highlighted = highlighted.replace(/^(#!.*)$/, '<span class="shebang">$1</span>');
                highlightedLines.push(highlighted);
                continue;
            }
            
            // 2. Highlight full-line comments
            if (highlighted.trim().startsWith('#')) {
                highlighted = highlighted.replace(/^(\s*)(#.*)$/, '$1<span class="comment">$2</span>');
                highlightedLines.push(highlighted);
                continue;
            }
            
            // 3. Highlight strings
            highlighted = highlighted.replace(/("[^"]*")/g, '<span class="string">$1</span>');
            highlighted = highlighted.replace(/('[^']*')/g, '<span class="string">$1</span>');
            
            // 4. Highlight inline comments (after code)
            highlighted = highlighted.replace(/(\s+)(#.*)$/, '$1<span class="comment">$2</span>');
            
            // 5. Highlight variables
            highlighted = highlighted.replace(/(\$\w+)/g, '<span class="variable">$1</span>');
            
            // 6. Highlight keywords
            keywords.forEach(keyword => {
                const regex = new RegExp(`\\b${keyword}\\b`, 'g');
                highlighted = highlighted.replace(regex, `<span class="keyword">${keyword}</span>`);
            });
            
            highlightedLines.push(highlighted);
        }
        
        return highlightedLines.join('\n');
    }
    
    // Apply syntax highlighting on page load
    document.addEventListener('DOMContentLoaded', function() {
        highlightCode();
    });
    
    // Navigation functions
    function prevSlide() {
        window.location.href = "slide04.html";
    }
    
    function nextSlide() {
        window.location.href = "slide06.html";
    }
    
    function jumpToIndex() {
        window.location.href = "index.html";
    }
    
    function toggleFullscreen() {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
        } else {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            }
        }
    }
    
    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowRight' || e.key === ' ') {
            nextSlide();
        } else if (e.key === 'ArrowLeft') {
            prevSlide();
        } else if (e.key === 'Home') {
            jumpToIndex();
        } else if (e.key === 'F11') {
            e.preventDefault();
            toggleFullscreen();
        }
    });
</script>

</body>
</html>